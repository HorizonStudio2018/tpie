# Copyright (c) 1994 Darren Erik Vengroff

# $Id: Makefile.in,v 1.11 1994-11-02 22:07:13 darrenv Exp $

# Makefile for TPIE libraries.

# Use GNU make on this Makefile.  It relies on the default rules.
# Use (GNU) "make -p" to see the default rules.

TPIEINC = ../../include

LIBRARY = libtpie.a

RANLIB = @RANLIB@

ARFLAGS = rv

CXX = @CXX@

CXXFLAGS = -Wall

override CPPFLAGS += -I$(TPIEINC) @DEFS@

SRC =	logstream.cpp tpie_log.cpp mm_register.cpp ami_device.cpp	\
	ami_single.cpp mm_base.cpp bte_mmb.cpp bte_stdio.cpp		\
	bte_block_collection.cpp

OBJ = $(SRC:.cpp=.o)

LIB_COMPONENTS = $(patsubst %.cpp,$(LIBRARY)(%.o),$(SRC))

(%): %
	$(AR) $(ARFLAGS) $@ $<

%.d: %.cpp
	$(SHELL) -ec '$(CXX) -M $(CPPFLAGS) $< | sed '\''s/$*.o/& $@/g'\'' > $@'

all : $(LIBRARY)

include $(SRC:.cpp=.d)

$(LIBRARY): $(LIB_COMPONENTS)

.PHONY : clean all

clean:
	-rm *.o *.d
	-rm $(LIBRARY)


