# Copyright (c) 1994 Darren Erik Vengroff
#
# The Makefile for the complete TPIE system.
#
# $Id: Makefile.in,v 1.16 1995-03-07 15:31:09 darrenv Exp $
#

MY_DEFS := @DEFS@
MY_LIBS := @LIBS@

SHELL := /bin/csh

# Send all variables into recursive makes.
export

# The directories storing the components of the system

LIBPATH := ./lib/

LIBSRCPATH := $(LIBPATH)src/

TESTPATH := ./test/

INCPATH := ./include/

DOCPATH := ./doc/

usage:
	@echo $(MAKE) "[ all | inc | lib | test | doc | clean | distclean ]"

all: inc lib test doc

inc:
	$(MAKE) -C $(INCPATH) all

lib: 
	$(MAKE) -C $(LIBSRCPATH) all
	$(MAKE) -C $(LIBPATH) all

test: 
	$(MAKE) -C $(TESTPATH) all

doc:
	$(MAKE) -C $(DOCPATH) all

.PHONY : clean lib inc test doc usage all distclean

distcleandir = (rm -f $(dir)*~; rm -f $(dir)Makefile)

dirs := ./ $(TESTPATH) $(LIBPATH) $(LIBSRCPATH) $(INCPATH) $(DOCPATH)

clean:
	$(MAKE) -C $(TESTPATH) $@
	$(MAKE) -C $(LIBPATH) $@
	$(MAKE) -C $(INCPATH) $@
	$(MAKE) -C $(DOCPATH) $@
 
distclean: clean
	$(foreach dir,$(dirs),$(distcleandir);)
