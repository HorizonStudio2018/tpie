language: cpp

env:
  global:
    - CTEST_OUTPUT_ON_FAILURE=1
    - LD_PRELOAD=/lib/x86_64-linux-gnu/libSegFault.so

    # Contains GH_TOKEN
    # See https://gist.github.com/willprice/e07efd73fb7f13f917ea
    - secure: "vTTJkPmZXwPQqgYGmrZxHoedPxlUqExLst0QV+oh7Fl7vvbNX2IYmP9p80WqpKYt6DGEyEZ+A4DryRmN3SmilZIRIHqT+LIkEFhJJXWbrfty+ygFv5GjfVFKU2FCiisvqBIKgusqP5Set7MogcEn50Eb7x/x1xeOXlEruoglSQk="

notifications:
  email: false

#install:
#  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
#      brew update;
#      brew install snappy lz4 zstd;
#    else
#      export MACRO_FLAGS="-DLZ4_compress_default\(a,b,c,d\)=LZ4_compress\(a,b,c\)";
#      sudo apt-get update;
#      if [[ "$_CC" == "gcc-"* ]]; then
#        sudo apt-get install "$_CC" "$_CXX";
#      else
#        if [[ "$_CC" == "clang-"* ]]; then
#          sudo apt-get install "$_CC";
#        fi;
#        sudo apt-get install libstdc++-5-dev;
#      fi;
#      if [[ -n "$_CC" ]]; then
#        export CC=$_CC;
#      fi;
#      if [[ -n "$_CXX" ]]; then
#        export CXX=$_CXX;
#      fi;
#      git clone https://github.com/facebook/zstd;
#      cd zstd;
#      git checkout tags/v1.3.1;
#      sudo make install;
#      cd ..;
#    fi

script:
  - git checkout --orphan travis_results
  - git reset --hard
  - >
    echo '{"result": "quxqax"}' > results.json
  - git add results.json
  - git commit -m 'Latest travis results'
  - git remote add pushable "https://${GH_TOKEN}@github.com/thomasmoelhave/tpie.git"
  - git push --force pushable travis_results
